{% extends 'base.html' %}
{% block meta %}
<title>Register - FootyRetail</title>
{% endblock meta %}
{% block content %}
<style>
  @keyframes shoot1 { 0% { transform: translate(0,0) scale(0.5) rotate(0deg); opacity: 1; } 100% { transform: translate(400px,-300px) scale(1.2) rotate(360deg); opacity: 0; } }
  @keyframes shoot2 { 0% { transform: translate(0,0) scale(0.5) rotate(0deg); opacity: 1; } 100% { transform: translate(-400px,-250px) scale(1.3) rotate(-360deg); opacity: 0; } }
  @keyframes shoot3 { 0% { transform: translate(0,0) scale(0.6) rotate(0deg); opacity: 1; } 100% { transform: translate(300px,250px) scale(1.1) rotate(180deg); opacity: 0; } }
  @keyframes shoot4 { 0% { transform: translate(0,0) scale(0.6) rotate(0deg); opacity: 1; } 100% { transform: translate(-350px,200px) scale(1.2) rotate(-180deg); opacity: 0; } }

  .ball { position: absolute; font-size: 3rem; opacity: 0.7; pointer-events: none; }
  .ball1 { top: 20%; left: 10%; animation: shoot1 6s linear infinite; }
  .ball2 { top: 60%; right: 10%; animation: shoot2 7s linear infinite 1s; }
  .ball3 { bottom: 20%; left: 50%; animation: shoot3 8s linear infinite 2s; }
  .ball4 { top: 40%; right: 30%; animation: shoot4 9s linear infinite 3s; }
</style>

<div class="min-h-screen bg-gradient-to-br from-green-900 via-green-700 to-green-400 flex items-center justify-center p-4 relative overflow-hidden">
  <!-- Animated Soccer Balls -->
  <span class="ball ball1">⚽</span>
  <span class="ball ball2">⚽</span>
  <span class="ball ball3">⚽</span>
  <span class="ball ball4">⚽</span>

  <div class="max-w-md w-full relative z-10">
    <div class="bg-white rounded-xl shadow-2xl p-8 form-style">
      <!-- Header -->
      <div class="text-center mb-8">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-2">Join Us</h2>
        <p class="text-gray-600">Create your <span class="text-green-600 font-semibold">FootyRetail</span> account</p>
        <p class="text-sm text-gray-500 mt-1">More Than Football</p>
      </div>

      <!-- Form Errors Display -->
      {% if form.non_field_errors %}
        <div class="mb-6">
          {% for error in form.non_field_errors %}
            <div class="px-4 py-3 rounded-lg text-sm border-l-4 bg-red-50 border-red-500 text-red-700">
              <strong>⚠️ Error:</strong> {{ error }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {% if form.errors %}
        <div class="mb-6 space-y-2">
          {% for field, errors in form.errors.items %}
            {% if field != '__all__' %}
              {% for error in errors %}
                <div class="px-4 py-3 rounded-lg text-sm border-l-4 bg-red-50 border-red-500 text-red-700">
                  <strong>{{ field|title }}:</strong> {{ error }}
                </div>
              {% endfor %}
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      <!-- Register Form -->
      <form method="POST" action="" class="space-y-5">
        {% csrf_token %}
        
        <div>
          <label for="username" class="block text-sm font-semibold text-gray-700 mb-2">
            Username
          </label>
          <input 
            id="username" 
            name="username" 
            type="text" 
            required 
            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all" 
            placeholder="Choose a username"
            value="{{ form.username.value|default:'' }}">
          <p class="text-xs text-gray-500 mt-1">Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.</p>
        </div>

        <div>
          <label for="password1" class="block text-sm font-semibold text-gray-700 mb-2">
            Password
          </label>
          <input 
            id="password1" 
            name="password1" 
            type="password" 
            required 
            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all" 
            placeholder="Create a strong password">
          <p class="text-xs text-gray-500 mt-1">Your password must contain at least 8 characters and can't be too common.</p>
        </div>

        <div>
          <label for="password2" class="block text-sm font-semibold text-gray-700 mb-2">
            Confirm Password
          </label>
          <input 
            id="password2" 
            name="password2" 
            type="password" 
            required 
            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all" 
            placeholder="Confirm your password">
          <p class="text-xs text-gray-500 mt-1">Enter the same password as before, for verification.</p>
        </div>

        <button 
          type="submit" 
          name="submit"
          class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all transform hover:scale-105 shadow-lg hover:shadow-xl">
          Create Account
        </button>
      </form>

      <!-- Messages Display -->
      {% if messages %}
        <div class="mt-6 space-y-2">
          {% for message in messages %}
            <div 
              class="
                px-4 py-3 rounded-lg text-sm border-l-4
                {% if message.tags == 'success' %}
                  bg-green-50 border-green-500 text-green-700
                {% elif message.tags == 'error' %}
                  bg-red-50 border-red-500 text-red-700
                {% else %}
                  bg-blue-50 border-blue-500 text-blue-700
                {% endif %}
              ">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Login Link -->
      <div class="mt-8 text-center pt-6 border-t border-gray-200">
        <p class="text-gray-600 text-sm">
          Already have an account? 
          <a href="{% url 'main:login' %}" class="text-green-600 hover:text-green-700 font-bold hover:underline transition-colors">
            Sign In
          </a>
        </p>
      </div>

      <!-- Back to Home -->
      <div class="mt-4 text-center">
        <a href="{% url 'main:show_main' %}" class="text-gray-500 hover:text-gray-700 text-sm font-medium hover:underline transition-colors">
          ← Back to Home
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock content %}